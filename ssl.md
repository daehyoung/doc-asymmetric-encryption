# 해시
- 데이터 블럭에 대해 특정 알고리즘으로 연산하면, 짧고 일정한 길이의 값을 출력하도록 할 수 있는 데 이것을 해시라 한다.
* 해시  - 입력 값이 조금이라도 변경하면 그 값이 완전히 다른 값이 출력한다.
* 데이터 요약(다이제스트) - 입력 데이터 보다 길이가 짧다. 입력 값이 같으면 항상 동일한 값을 출력한다.
* 단방향 - 해시 값으로는 원본데이터를 알수 없다. 즉 데이터로 해시 값을 생성할 수는 있지만 복원할 수는 없다.
* 해시 충돌 - 입력 길이나 출력 길이에따라 그리고 알고리즘에 따라 해시 값이 동일해 질수 있다. 이를 해시 충돌이라 한다. 충돌 방지하기 위해 충돌 확률이 낮은 알고리즘을 사용한다.
* MD5, HAS-160, SHA-1, SHA-2, SHA-3 등 이 있다.

# 해시를 통한 데이터 변경 감지
- 데이터의 변경 여부를 확인할 때 해시 값을 사용한다. 즉 모든 데이터를 비교하는 것이 아니라, 배포자가 해시를 구한 뒤 이 해시 값과 계산 알고리즘을 배포한다. 데이터를 검증할때 배포 데이터의 해시를 직접 계산한뒤 배포자가 만든 해시와 비교하여 같은지 확인한다.

# 서명(해시 값 암호화)
- 해시를 통한 데이터 위조 변조를 확인하려면, 배포 해시 값 자체가 위조되지 않았음을 증명해야하는데 이를 위해 비대칭 암호화 알고리즘을 사용한다. 해시 값을 프라이빗키로 암호화(서명) 한 뒤, 공개자는 원본 데이터와 퍼블릭 키와 서명(암호화된 해시)을 공개한다. 서명(해시 암호화)은 퍼블릭 키로 풀 수 있지만 퍼블릭키로 서명을 생성할 수 없다. 상대방이 배포자의 퍼블릭 키를 미리 알고 있으면(모든 사람에게 미리 공개 됨), 서명이 위조되었을 때 퍼블릭 키로 서명을 복원하면 잘못된 해시값이 나오고, 데이터의 해시를 계산 값과 일치하지 않게된다. 이 경우 퍼블릭 키의 배포가 중요해진다.

## 대칭 키(Symmetric Key) 암호화 알고리즘
* 대칭성 - 데이터를 암호화 하는 키와 데이터를 복호화(복원)하는 키가 같다는 의미이다. 
* 복잡성 - 비대칭 키에 비해 간단하고 속도가 빠르다.
* 키전달 - 통신을 위해서는, 제 3자가 모르게  상대방에게 키를 전달해야하는 문제가 발생한다.


## 비대칭 키(Asymmetric Key) 암호화 알고리즘
* 비대칭성 - 데이터를 암호화 하는 키와 데이터를 복호화(복원)하는 키다 다르다는 의미이다.
* 쌍 - 프라이빗 키(개인키 ,Privite key), 퍼블릭 키(공개키, Public key)가 쌍을 이룬다. 프라이빗 키로 암호화 하면 퍼블릭 키로만 복원할 수 있고 퍼블릭 키로 암호화 하면 프라이빗 키로만 복원할 수 있다.
* 복잡성 - 프라이빗 키에서 퍼블릭 키를 만들기는 쉽지만 퍼블릭 키에서 프라이빗 키를 알기는 어렵다.
* 키전달 - 퍼블릭 키는 누구에게나 공개가 가능하다.
* RSA, ECC(타원 곡선 암호화), DSA(디지털 서명 알고리즘) 


# 보안통신 ssh
- 접속자(클라이언트)가 미리 퍼블릭 키를 접속대상(서버)에게 계정과 함께 등록한다.(사용자ID, 퍼블릭키)정보가 저장된다.
- 접속자(클라이언트)는 접속대상(서버)에게  사용자ID와 함께 접속자의 프라이빗 키로 암호화된 데이터(통신에 사용할 일회용 대칭키)를 전달한다.
- 접속대상(서버)는 사용자ID으로 퍼블릭키를 찾아 메시지를 복원한다. 
- 접속자와 접속대상은 대칭키로 암호화 통신을 수행한다.


# 인증서
- 아날로그 일상 생활에서 다양한 인증서를 발행한다. A라는 사람이 은행 B에 계좌 C가 있음을 증명하기 위해 은행 B에서 계좌 증명서를 발행한다. 운전면허증은 A라는 사람이 운전면허시험에 합격했고, A라는 사람의 인적 정보(사진,주소)를 증명하는 면허증을 정부 기관에서 발행한다. 즉 신뢰할 만한 3자를 통해, 인증 대상에 대해 사실이 틀림 없음을 증명하는 것이다.
- 디지털 인증서도 A라는 대상이 사실임을 신뢰할 수 있는 3자를 통해 증명한다.
- 공인 인증서는 인증 대상에 대한 데이터(예, 기관정보, 주소, 도메인, 인증 대상에 대한 프라이빗 키)를 해시를 생성한 뒤, 인증자가(보통은 제3자 CA) 프라이빗키로 암호화 한다(서명). 인증자(CA, 신뢰할 만한 3자)의 퍼블릭키는 미리 공개되어 있다. 즉 인증자(CA)의 퍼블릭키가 변조되면 안된다. 그래서 브라우저, 윈도우즈, 맥OS에 미리 내장되어 있다.

# 신뢰체계(Trust Chain)
* 루트 인증서(Root Certificate) - CA의 공개 키는 일반적으로 루트 인증서에 포함되어 있다. 루트 인증서는 주요 운영 체제나 웹 브라우저에 사전 설치되어 있는 신뢰할 수 있는 CA의 인증서이다.
* 신뢰 체계(Trust Chain) - 공인 인증서의 신뢰성을 검증하기 위해 신뢰 체계를 사용한다. 이 체계는 인증서 체인을 통해 최종 사용자 인증서에서 루트 인증서까지 이어진다. 각 단계에서 상위 인증서의 공개 키를 사용해 하위 인증서의 서명을 검증한다.


# 보안 통신 https, ssl(tls)
## 서버 검증
https나 ssl(tls)를 사용한 통신의 경우, 접속자(브라우저 또는 통신 프로그램)는 상대방(서버)을 인증하는 과정을 거친다. 모든 서버의 퍼블릭키를 미리 저장할 수 없기 때문에 신뢰할 만한 3자가 발행한 인증서를 통해 서버의 주소와 퍼블릭키가 변조되지 않았을 증명한다. 그리고 신뢰체계(Trust Chain)과 루트 인증서(Root Certificate)를 통해 검증한다.

접속자는 상대방에 접속한다, 상대방(서버)은 인증서와 신뢰 체계를 전달한다. 인증서에는 서버의 정보(도메인 주소, 퍼블릭키)와 서명, 인증서 발행자의 정보가 포함되어 있다. 인증서 자체에 신뢰 체계를 포함하지 않는다. 대신 인증서를 제시할 때 신뢰 체계를 같이 제시한다. 접속자는 미리 저장된 CA인증서를 통해, 서버가 제시한  인증서와 루트 인증서 신뢰체계를 검증한다.

## 대칭키 전달
서버 인증을 마치면 인증서에 포함되어 있는 서버의 퍼블릭키로 통신에 사용할 대칭키를 전달한다. 즉 접속자(클라이언트)가 서버의 퍼블릭키로 대칭키를 암호화 하여 전송한다. 서버는 전달된 대칭키를 프라이빗키로 복호화 한다. 

## 통신
클라이언트가 서버에 전달한 대칭키를 사용하여 데이터를 암호화 하여 클라이언트에게 전달한다.
